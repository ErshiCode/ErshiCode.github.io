import{f as X,u as Z,g as j,h as ee,P as te,t as se,i as ae,j as q,k as H,l as s,m as le,n as I,p as re,R as O,q as ue,s as ie,v as oe,x as ce,y as ne,z as T,A as b,C as ve,B as he,D as de,E as pe,F as ye,G as Ee,H as me,I as _,J as Be,K as D}from"./app-DDKds1zU.js";const ge=["/","/intro.html","/Basics/DataStructure/Arrays.html","/Basics/DataStructure/","/Basics/LeetCode/","/Basics/LeetCode/%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C.html","/Basics/LeetCode/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C.html","/Basics/LeetCode/%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D%E5%88%86%E7%BB%84.html","/Basics/LeetCode/%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%BA%8F%E5%88%97.html","/Basics/LeetCode/%E7%A7%BB%E5%8A%A8%E9%9B%B6.html","/Tools/Git/","/Tools/Resource/","/Others/ElectronicProduct/","/Others/ElectronicProduct/computer.html","/Others/ElectronicProduct/keyboard.html","/Others/ElectronicProduct/mouse.html","/Others/ElectronicProduct/screen.html","/404.html","/Basics/","/Tools/","/Others/","/category/","/category/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/category/%E6%95%B0%E7%BB%84/","/category/%E7%AE%97%E6%B3%95/","/category/%E5%8F%8C%E6%8C%87%E9%92%88/","/category/%E4%B8%AD%E7%AD%89/","/category/%E5%93%88%E5%B8%8C%E8%A1%A8/","/category/%E7%AE%80%E5%8D%95/","/category/git/","/tag/","/tag/%E8%B5%84%E6%BA%90%E6%95%B4%E5%90%88/","/article/","/star/","/timeline/"],Ae="SEARCH_PRO_QUERY_HISTORY",E=_(Ae,[]),fe=()=>{const{queryHistoryCount:l}=D;return{enabled:l>0,queryHistory:E,addQueryHistory:i=>{E.value=Array.from(new Set([i,...E.value.slice(0,l-1)]))},removeQueryHistory:i=>{E.value=[...E.value.slice(0,i),...E.value.slice(i+1)]}}},x=l=>ge[l.id]+("anchor"in l?`#${l.anchor}`:""),Ce="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=D,m=_(Ce,[]),He=()=>({enabled:$>0,resultHistory:m,addResultHistory:r=>{{const i={link:x(r),display:r.display};"header"in r&&(i.header=r.header),m.value=[i,...m.value.slice(0,$-1)]}},removeResultHistory:r=>{m.value=[...m.value.slice(0,r),...m.value.slice(r+1)]}}),De=l=>{const r=ve(),i=j(),R=he(),o=q(0),B=H(()=>o.value>0),h=de([]);return pe(()=>{const{search:k,terminate:d}=ye(),g=Ee(y=>{const A=y.join(" "),{searchFilter:p=a=>a,splitWord:S,suggestionsFilter:u,...c}=r.value;A?(o.value+=1,k(y.join(" "),i.value,c).then(a=>p(a,A,i.value,R.value)).then(a=>{o.value-=1,h.value=a}).catch(a=>{console.warn(a),o.value-=1,o.value||(h.value=[])})):h.value=[]},D.searchDelay-D.suggestDelay);I([l,i],([y])=>g(y),{immediate:!0}),me(()=>{d()})}),{isSearching:B,results:h}};var ke=X({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:r}){const i=Z(),R=j(),o=ee(te),{addQueryHistory:B,queryHistory:h,removeQueryHistory:k}=fe(),{resultHistory:d,addResultHistory:g,removeResultHistory:y}=He(),A=se(l,"queries"),{results:p,isSearching:S}=De(A),u=ae({isQuery:!0,index:0}),c=q(0),a=q(0),F=H(()=>h.value.length>0||d.value.length>0),Q=H(()=>p.value.length>0),w=H(()=>p.value[c.value]||null),U=()=>{const{isQuery:e,index:t}=u;t===0?(u.isQuery=!e,u.index=e?d.value.length-1:h.value.length-1):u.index=t-1},Y=()=>{const{isQuery:e,index:t}=u;t===(e?h.value.length-1:d.value.length-1)?(u.isQuery=!e,u.index=0):u.index=t+1},G=()=>{c.value=c.value>0?c.value-1:p.value.length-1,a.value=w.value.contents.length-1},M=()=>{c.value=c.value<p.value.length-1?c.value+1:0,a.value=0},z=()=>{a.value<w.value.contents.length-1?a.value+=1:M()},J=()=>{a.value>0?a.value-=1:G()},L=e=>e.map(t=>Be(t)?t:s(t[0],t[1])),K=e=>{if(e.type==="customField"){const t=ce[e.index]||"$content",[n,C=""]=ne(t)?t[R.value].split("$content"):t.split("$content");return e.display.map(v=>s("div",L([n,...v,C])))}return e.display.map(t=>s("div",L(t)))},f=()=>{c.value=0,a.value=0,r("updateQuery",""),r("close")},V=()=>s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.queryHistory),h.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:u.isQuery&&u.index===t}],onClick:()=>{r("updateQuery",e)}},[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:b,onClick:n=>{n.preventDefault(),n.stopPropagation(),k(t)}})]))])),N=()=>s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.resultHistory),d.value.map((e,t)=>s(O,{to:e.link,class:["search-pro-result-item",{active:!u.isQuery&&u.index===t}],onClick:()=>{f()}},()=>[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(n=>L(n)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:b,onClick:n=>{n.preventDefault(),n.stopPropagation(),y(t)}})]))]));return le("keydown",e=>{if(l.isFocusing){if(Q.value){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const t=w.value.contents[a.value];B(l.queries.join(" ")),g(t),i.push(x(t)),f()}}else if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=u;u.isQuery?(r("updateQuery",h.value[t]),e.preventDefault()):(i.push(d.value[t].link),f())}}}),I([c,a],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!Q.value:!F.value}],id:"search-pro-results"},l.queries.length?S.value?s(re,{hint:o.value.searching}):Q.value?s("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:t},n)=>{const C=c.value===n;return s("li",{class:["search-pro-result-list-item",{active:C}]},[s("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((v,W)=>{const P=C&&a.value===W;return s(O,{to:x(v),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{B(l.queries.join(" ")),g(v),f()}},()=>[v.type==="text"?null:s(v.type==="title"?ue:v.type==="heading"?ie:oe,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[v.type==="text"&&v.header?s("div",{class:"content-header"},v.header):null,s("div",K(v))])])})])})):o.value.emptyResult:F.value?[V(),N()]:o.value.emptyHistory)}});export{ke as default};
