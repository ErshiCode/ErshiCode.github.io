import{f as X,u as Z,g as j,h as ee,P as te,t as se,i as ae,j as S,k,l as s,m as re,n as I,p as le,R as T,q as ue,s as ie,v as oe,x as ce,y as ne,z as F,A as b,C as ve,B as he,D as de,E as pe,F as ye,G as me,H as Ee,I as _,J as ge,K as C}from"./app-Cg4nNUb8.js";const Be=["/","/intro.html","/Basics/DataStructure/Arrays.html","/Basics/DataStructure/","/Basics/LeetCode/","/Basics/LeetCode/%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C.html","/Basics/LeetCode/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C.html","/Others/ElectronicProduct/","/Others/ElectronicProduct/computer.html","/Others/ElectronicProduct/keyboard.html","/Others/ElectronicProduct/mouse.html","/Others/ElectronicProduct/screen.html","/Tools/Git/","/Tools/Resource/","/404.html","/Basics/","/Others/","/Tools/","/category/","/category/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/category/%E6%95%B0%E7%BB%84/","/category/%E7%AE%97%E6%B3%95/","/category/%E5%8F%8C%E6%8C%87%E9%92%88/","/category/%E5%93%88%E5%B8%8C%E8%A1%A8/","/category/git/","/tag/","/tag/%E8%B5%84%E6%BA%90%E6%95%B4%E5%90%88/","/article/","/star/","/timeline/"],fe="SEARCH_PRO_QUERY_HISTORY",m=_(fe,[]),He=()=>{const{queryHistoryCount:r}=C;return{enabled:r>0,queryHistory:m,addQueryHistory:i=>{m.value=Array.from(new Set([i,...m.value.slice(0,r-1)]))},removeQueryHistory:i=>{m.value=[...m.value.slice(0,i),...m.value.slice(i+1)]}}},D=r=>Be[r.id]+("anchor"in r?`#${r.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=C,E=_(Re,[]),ke=()=>({enabled:$>0,resultHistory:E,addResultHistory:l=>{{const i={link:D(l),display:l.display};"header"in l&&(i.header=l.header),E.value=[i,...E.value.slice(0,$-1)]}},removeResultHistory:l=>{E.value=[...E.value.slice(0,l),...E.value.slice(l+1)]}}),Ce=r=>{const l=ve(),i=j(),Q=he(),o=S(0),g=k(()=>o.value>0),h=de([]);return pe(()=>{const{search:w,terminate:d}=ye(),B=me(y=>{const f=y.join(" "),{searchFilter:p=a=>a,splitWord:L,suggestionsFilter:u,...c}=l.value;f?(o.value+=1,w(y.join(" "),i.value,c).then(a=>p(a,f,i.value,Q.value)).then(a=>{o.value-=1,h.value=a}).catch(a=>{console.warn(a),o.value-=1,o.value||(h.value=[])})):h.value=[]},C.searchDelay-C.suggestDelay);I([r,i],([y])=>B(y),{immediate:!0}),Ee(()=>{d()})}),{isSearching:g,results:h}};var we=X({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:l}){const i=Z(),Q=j(),o=ee(te),{addQueryHistory:g,queryHistory:h,removeQueryHistory:w}=He(),{resultHistory:d,addResultHistory:B,removeResultHistory:y}=ke(),f=se(r,"queries"),{results:p,isSearching:L}=Ce(f),u=ae({isQuery:!0,index:0}),c=S(0),a=S(0),P=k(()=>h.value.length>0||d.value.length>0),q=k(()=>p.value.length>0),x=k(()=>p.value[c.value]||null),U=()=>{const{isQuery:e,index:t}=u;t===0?(u.isQuery=!e,u.index=e?d.value.length-1:h.value.length-1):u.index=t-1},Y=()=>{const{isQuery:e,index:t}=u;t===(e?h.value.length-1:d.value.length-1)?(u.isQuery=!e,u.index=0):u.index=t+1},G=()=>{c.value=c.value>0?c.value-1:p.value.length-1,a.value=x.value.contents.length-1},M=()=>{c.value=c.value<p.value.length-1?c.value+1:0,a.value=0},z=()=>{a.value<x.value.contents.length-1?a.value+=1:M()},J=()=>{a.value>0?a.value-=1:G()},A=e=>e.map(t=>ge(t)?t:s(t[0],t[1])),K=e=>{if(e.type==="customField"){const t=ce[e.index]||"$content",[n,R=""]=ne(t)?t[Q.value].split("$content"):t.split("$content");return e.display.map(v=>s("div",A([n,...v,R])))}return e.display.map(t=>s("div",A(t)))},H=()=>{c.value=0,a.value=0,l("updateQuery",""),l("close")},V=()=>s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.queryHistory),h.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:u.isQuery&&u.index===t}],onClick:()=>{l("updateQuery",e)}},[s(F,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:b,onClick:n=>{n.preventDefault(),n.stopPropagation(),w(t)}})]))])),N=()=>s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.resultHistory),d.value.map((e,t)=>s(T,{to:e.link,class:["search-pro-result-item",{active:!u.isQuery&&u.index===t}],onClick:()=>{H()}},()=>[s(F,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(n=>A(n)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:b,onClick:n=>{n.preventDefault(),n.stopPropagation(),y(t)}})]))]));return re("keydown",e=>{if(r.isFocusing){if(q.value){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const t=x.value.contents[a.value];g(r.queries.join(" ")),B(t),i.push(D(t)),H()}}else if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=u;u.isQuery?(l("updateQuery",h.value[t]),e.preventDefault()):(i.push(d.value[t].link),H())}}}),I([c,a],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:r.queries.length?!q.value:!P.value}],id:"search-pro-results"},r.queries.length?L.value?s(le,{hint:o.value.searching}):q.value?s("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:t},n)=>{const R=c.value===n;return s("li",{class:["search-pro-result-list-item",{active:R}]},[s("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((v,W)=>{const O=R&&a.value===W;return s(T,{to:D(v),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{g(r.queries.join(" ")),B(v),H()}},()=>[v.type==="text"?null:s(v.type==="title"?ue:v.type==="heading"?ie:oe,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[v.type==="text"&&v.header?s("div",{class:"content-header"},v.header):null,s("div",K(v))])])})])})):o.value.emptyResult:P.value?[V(),N()]:o.value.emptyHistory)}});export{we as default};
